(()=>{"use strict";var __webpack_modules__={729:(__unused_webpack_module,exports)=>{eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.activate = activate;\n// 四元数转换函数\nfunction eulerToQuaternion(pitch, yaw, roll) {\n    let cy = Math.cos(yaw * 0.5);\n    let sy = Math.sin(yaw * 0.5);\n    let cr = Math.cos(roll * 0.5);\n    let sr = Math.sin(roll * 0.5);\n    let cp = Math.cos(pitch * 0.5);\n    let sp = Math.sin(pitch * 0.5);\n    let qx = cy * sr * cp - sy * cr * sp;\n    let qy = cy * cr * sp + sy * sr * cp;\n    let qz = sy * cr * cp - cy * sr * sp;\n    let qw = cy * cr * cp + sy * sr * sp;\n    return { x: qx, y: qy, z: qz, w: qw };\n}\n// 计算 yaw 角度：根据两个位置的夹角（1号装甲板与敌人中心）\nfunction calculateYaw(armor1, center) {\n    const dx = center.pose.position.x - armor1.pose.position.x;\n    const dy = center.pose.position.y - armor1.pose.position.y;\n    return Math.atan2(dy, dx); // 使用 atan2 来计算夹角\n}\n// 转换函数，将 EnemyInfo 转换为 SceneUpdate\nfunction convertEnemyInfo(inputMessage) {\n    const { armor1, armor2, armor3, armor4, center } = inputMessage;\n    // 计算 yaw 和 pitch 角度\n    const yaw = calculateYaw(armor1, center);\n    const pitch = -75 * Math.PI / 180; // 15度 (以弧度表示)\n    // 使用欧拉角转换为四元数\n    const orientation = eulerToQuaternion(pitch, yaw, 0); // roll 固定为 0\n    // 绘制矩形\n    const rectangle = {\n        pose: {\n            position: {\n                x: armor1.pose.position.x,\n                y: armor1.pose.position.y,\n                z: armor1.pose.position.z,\n            },\n            orientation: orientation, // 使用计算出来的四元数\n        },\n        size: { x: 0.125, y: 0.15, z: 0.05 }, // 假设长方体的尺寸为 1x2x0.5\n        color: { r: 1, g: 0, b: 0, a: 1 },\n    };\n    // 用球体表示每个坐标点的函数\n    const spherePrimitive = (pose, isCenter) => ({\n        pose: {\n            position: {\n                x: pose.pose.position.x,\n                y: pose.pose.position.y,\n                z: pose.pose.position.z,\n            },\n            orientation: {\n                x: pose.pose.orientation.x || 0,\n                y: pose.pose.orientation.y || 0,\n                z: pose.pose.orientation.z || 0,\n                w: pose.pose.orientation.w || 1,\n            },\n        },\n        size: { x: 0.1, y: 0.1, z: 0.1 },\n        color: isCenter ? { r: 0, g: 0, b: 1, a: 1 } : { r: 1, g: 0, b: 0, a: 1 },\n    });\n    // 为每个 armor 和 center 创建球体，center 的球体颜色为蓝色\n    const spherePrimitives = [\n        spherePrimitive(armor1, true),\n        spherePrimitive(armor2, false),\n        spherePrimitive(armor3, false),\n        spherePrimitive(armor4, false),\n        spherePrimitive(center, true), // center 的球体为蓝色\n    ];\n    const sceneUpdateMessage = {\n        deletions: [],\n        entities: [\n            {\n                id: "enemy-info", // 设置唯一标识符\n                timestamp: armor1.header.stamp, // 使用第一个 armor 的时间戳\n                frame_id: armor1.header.frame_id, // 使用第一个 armor 的坐标系\n                lifetime: { sec: 10, nsec: 0 }, // 设置可视化消息的生命周期\n                frame_locked: false,\n                metadata: [],\n                arrows: [],\n                cubes: [rectangle], // 添加矩形到场景\n                spheres: spherePrimitives, // 添加球体到场景\n                cylinders: [],\n                lines: [],\n                triangles: [],\n                texts: [],\n                models: [],\n            },\n        ],\n    };\n    return sceneUpdateMessage;\n}\nfunction activate(extensionContext) {\n    extensionContext.registerMessageConverter({\n        fromSchemaName: "robot_msgs/msg/EnemyInfo", // ROS 消息类型\n        toSchemaName: "foxglove.SceneUpdate", // 转换为 Foxglove 的可视化消息类型\n        converter: convertEnemyInfo, // 转换函数\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzI5LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxZQUFZLHlDQUF5QztBQUNyRDtBQUNBO0FBQ0EsdUNBQXVDO0FBQ3ZDO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNULGdCQUFnQiw0QkFBNEI7QUFDNUMsaUJBQWlCLHdCQUF3QjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULGdCQUFnQix3QkFBd0I7QUFDeEMsNEJBQTRCLHlCQUF5QixJQUFJLHdCQUF3QjtBQUNqRixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtCQUFrQjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9NZXNzYWdlQ29udmVydGVyLy4vc3JjL2luZGV4LnRzPzMzYmMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmFjdGl2YXRlID0gYWN0aXZhdGU7XG4vLyDlm5vlhYPmlbDovazmjaLlh73mlbBcbmZ1bmN0aW9uIGV1bGVyVG9RdWF0ZXJuaW9uKHBpdGNoLCB5YXcsIHJvbGwpIHtcbiAgICBsZXQgY3kgPSBNYXRoLmNvcyh5YXcgKiAwLjUpO1xuICAgIGxldCBzeSA9IE1hdGguc2luKHlhdyAqIDAuNSk7XG4gICAgbGV0IGNyID0gTWF0aC5jb3Mocm9sbCAqIDAuNSk7XG4gICAgbGV0IHNyID0gTWF0aC5zaW4ocm9sbCAqIDAuNSk7XG4gICAgbGV0IGNwID0gTWF0aC5jb3MocGl0Y2ggKiAwLjUpO1xuICAgIGxldCBzcCA9IE1hdGguc2luKHBpdGNoICogMC41KTtcbiAgICBsZXQgcXggPSBjeSAqIHNyICogY3AgLSBzeSAqIGNyICogc3A7XG4gICAgbGV0IHF5ID0gY3kgKiBjciAqIHNwICsgc3kgKiBzciAqIGNwO1xuICAgIGxldCBxeiA9IHN5ICogY3IgKiBjcCAtIGN5ICogc3IgKiBzcDtcbiAgICBsZXQgcXcgPSBjeSAqIGNyICogY3AgKyBzeSAqIHNyICogc3A7XG4gICAgcmV0dXJuIHsgeDogcXgsIHk6IHF5LCB6OiBxeiwgdzogcXcgfTtcbn1cbi8vIOiuoeeulyB5YXcg6KeS5bqm77ya5qC55o2u5Lik5Liq5L2N572u55qE5aS56KeS77yIMeWPt+ijheeUsuadv+S4juaVjOS6uuS4reW/g++8iVxuZnVuY3Rpb24gY2FsY3VsYXRlWWF3KGFybW9yMSwgY2VudGVyKSB7XG4gICAgY29uc3QgZHggPSBjZW50ZXIucG9zZS5wb3NpdGlvbi54IC0gYXJtb3IxLnBvc2UucG9zaXRpb24ueDtcbiAgICBjb25zdCBkeSA9IGNlbnRlci5wb3NlLnBvc2l0aW9uLnkgLSBhcm1vcjEucG9zZS5wb3NpdGlvbi55O1xuICAgIHJldHVybiBNYXRoLmF0YW4yKGR5LCBkeCk7IC8vIOS9v+eUqCBhdGFuMiDmnaXorqHnrpflpLnop5Jcbn1cbi8vIOi9rOaNouWHveaVsO+8jOWwhiBFbmVteUluZm8g6L2s5o2i5Li6IFNjZW5lVXBkYXRlXG5mdW5jdGlvbiBjb252ZXJ0RW5lbXlJbmZvKGlucHV0TWVzc2FnZSkge1xuICAgIGNvbnN0IHsgYXJtb3IxLCBhcm1vcjIsIGFybW9yMywgYXJtb3I0LCBjZW50ZXIgfSA9IGlucHV0TWVzc2FnZTtcbiAgICAvLyDorqHnrpcgeWF3IOWSjCBwaXRjaCDop5LluqZcbiAgICBjb25zdCB5YXcgPSBjYWxjdWxhdGVZYXcoYXJtb3IxLCBjZW50ZXIpO1xuICAgIGNvbnN0IHBpdGNoID0gLTc1ICogTWF0aC5QSSAvIDE4MDsgLy8gMTXluqYgKOS7peW8p+W6puihqOekuilcbiAgICAvLyDkvb/nlKjmrKfmi4nop5LovazmjaLkuLrlm5vlhYPmlbBcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IGV1bGVyVG9RdWF0ZXJuaW9uKHBpdGNoLCB5YXcsIDApOyAvLyByb2xsIOWbuuWumuS4uiAwXG4gICAgLy8g57uY5Yi255+p5b2iXG4gICAgY29uc3QgcmVjdGFuZ2xlID0ge1xuICAgICAgICBwb3NlOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgIHg6IGFybW9yMS5wb3NlLnBvc2l0aW9uLngsXG4gICAgICAgICAgICAgICAgeTogYXJtb3IxLnBvc2UucG9zaXRpb24ueSxcbiAgICAgICAgICAgICAgICB6OiBhcm1vcjEucG9zZS5wb3NpdGlvbi56LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiBvcmllbnRhdGlvbiwgLy8g5L2/55So6K6h566X5Ye65p2l55qE5Zub5YWD5pWwXG4gICAgICAgIH0sXG4gICAgICAgIHNpemU6IHsgeDogMC4xMjUsIHk6IDAuMTUsIHo6IDAuMDUgfSwgLy8g5YGH6K6+6ZW/5pa55L2T55qE5bC65a+45Li6IDF4MngwLjVcbiAgICAgICAgY29sb3I6IHsgcjogMSwgZzogMCwgYjogMCwgYTogMSB9LFxuICAgIH07XG4gICAgLy8g55So55CD5L2T6KGo56S65q+P5Liq5Z2Q5qCH54K555qE5Ye95pWwXG4gICAgY29uc3Qgc3BoZXJlUHJpbWl0aXZlID0gKHBvc2UsIGlzQ2VudGVyKSA9PiAoe1xuICAgICAgICBwb3NlOiB7XG4gICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgIHg6IHBvc2UucG9zZS5wb3NpdGlvbi54LFxuICAgICAgICAgICAgICAgIHk6IHBvc2UucG9zZS5wb3NpdGlvbi55LFxuICAgICAgICAgICAgICAgIHo6IHBvc2UucG9zZS5wb3NpdGlvbi56LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9yaWVudGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgeDogcG9zZS5wb3NlLm9yaWVudGF0aW9uLnggfHwgMCxcbiAgICAgICAgICAgICAgICB5OiBwb3NlLnBvc2Uub3JpZW50YXRpb24ueSB8fCAwLFxuICAgICAgICAgICAgICAgIHo6IHBvc2UucG9zZS5vcmllbnRhdGlvbi56IHx8IDAsXG4gICAgICAgICAgICAgICAgdzogcG9zZS5wb3NlLm9yaWVudGF0aW9uLncgfHwgMSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHNpemU6IHsgeDogMC4xLCB5OiAwLjEsIHo6IDAuMSB9LFxuICAgICAgICBjb2xvcjogaXNDZW50ZXIgPyB7IHI6IDAsIGc6IDAsIGI6IDEsIGE6IDEgfSA6IHsgcjogMSwgZzogMCwgYjogMCwgYTogMSB9LFxuICAgIH0pO1xuICAgIC8vIOS4uuavj+S4qiBhcm1vciDlkowgY2VudGVyIOWIm+W7uueQg+S9k++8jGNlbnRlciDnmoTnkIPkvZPpopzoibLkuLrok53oibJcbiAgICBjb25zdCBzcGhlcmVQcmltaXRpdmVzID0gW1xuICAgICAgICBzcGhlcmVQcmltaXRpdmUoYXJtb3IxLCB0cnVlKSxcbiAgICAgICAgc3BoZXJlUHJpbWl0aXZlKGFybW9yMiwgZmFsc2UpLFxuICAgICAgICBzcGhlcmVQcmltaXRpdmUoYXJtb3IzLCBmYWxzZSksXG4gICAgICAgIHNwaGVyZVByaW1pdGl2ZShhcm1vcjQsIGZhbHNlKSxcbiAgICAgICAgc3BoZXJlUHJpbWl0aXZlKGNlbnRlciwgdHJ1ZSksIC8vIGNlbnRlciDnmoTnkIPkvZPkuLrok53oibJcbiAgICBdO1xuICAgIGNvbnN0IHNjZW5lVXBkYXRlTWVzc2FnZSA9IHtcbiAgICAgICAgZGVsZXRpb25zOiBbXSxcbiAgICAgICAgZW50aXRpZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogXCJlbmVteS1pbmZvXCIsIC8vIOiuvue9ruWUr+S4gOagh+ivhuesplxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogYXJtb3IxLmhlYWRlci5zdGFtcCwgLy8g5L2/55So56ys5LiA5LiqIGFybW9yIOeahOaXtumXtOaIs1xuICAgICAgICAgICAgICAgIGZyYW1lX2lkOiBhcm1vcjEuaGVhZGVyLmZyYW1lX2lkLCAvLyDkvb/nlKjnrKzkuIDkuKogYXJtb3Ig55qE5Z2Q5qCH57O7XG4gICAgICAgICAgICAgICAgbGlmZXRpbWU6IHsgc2VjOiAxMCwgbnNlYzogMCB9LCAvLyDorr7nva7lj6/op4bljJbmtojmga/nmoTnlJ/lkb3lkajmnJ9cbiAgICAgICAgICAgICAgICBmcmFtZV9sb2NrZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBbXSxcbiAgICAgICAgICAgICAgICBhcnJvd3M6IFtdLFxuICAgICAgICAgICAgICAgIGN1YmVzOiBbcmVjdGFuZ2xlXSwgLy8g5re75Yqg55+p5b2i5Yiw5Zy65pmvXG4gICAgICAgICAgICAgICAgc3BoZXJlczogc3BoZXJlUHJpbWl0aXZlcywgLy8g5re75Yqg55CD5L2T5Yiw5Zy65pmvXG4gICAgICAgICAgICAgICAgY3lsaW5kZXJzOiBbXSxcbiAgICAgICAgICAgICAgICBsaW5lczogW10sXG4gICAgICAgICAgICAgICAgdHJpYW5nbGVzOiBbXSxcbiAgICAgICAgICAgICAgICB0ZXh0czogW10sXG4gICAgICAgICAgICAgICAgbW9kZWxzOiBbXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfTtcbiAgICByZXR1cm4gc2NlbmVVcGRhdGVNZXNzYWdlO1xufVxuZnVuY3Rpb24gYWN0aXZhdGUoZXh0ZW5zaW9uQ29udGV4dCkge1xuICAgIGV4dGVuc2lvbkNvbnRleHQucmVnaXN0ZXJNZXNzYWdlQ29udmVydGVyKHtcbiAgICAgICAgZnJvbVNjaGVtYU5hbWU6IFwicm9ib3RfbXNncy9tc2cvRW5lbXlJbmZvXCIsIC8vIFJPUyDmtojmga/nsbvlnotcbiAgICAgICAgdG9TY2hlbWFOYW1lOiBcImZveGdsb3ZlLlNjZW5lVXBkYXRlXCIsIC8vIOi9rOaNouS4uiBGb3hnbG92ZSDnmoTlj6/op4bljJbmtojmga/nsbvlnotcbiAgICAgICAgY29udmVydGVyOiBjb252ZXJ0RW5lbXlJbmZvLCAvLyDovazmjaLlh73mlbBcbiAgICB9KTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///729\n')}},__webpack_exports__={};__webpack_modules__[729](0,__webpack_exports__),module.exports=__webpack_exports__})();